<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MaskAnyone - Upload Flow</title>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300;400;500;600;700&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'IBM Plex Sans',sans-serif;background:#f5f5f5;color:#000;line-height:1.5;min-height:100vh}
    .icon-box{width:40px;height:40px;background:#000;color:#fff;display:flex;align-items:center;justify-content:center;border-radius:8px;flex-shrink:0}
    .icon-box-sm{width:32px;height:32px;font-size:14px}
    .icon-box-lg{width:56px;height:56px;font-size:24px}
    .icon-box-xl{width:80px;height:80px;font-size:32px}
    .icon-box-outline{background:#fff;color:#000;border:2px solid #000}
    .icon-box-gray{background:#e5e5e5;color:#666}
    .icon-box-success{background:#000;color:#fff}
    .card{background:#fff;border:1px solid #e5e5e5}
    .card-elevated{background:#fff;border:3px solid #000;position:relative}
    .card-elevated::before{content:'';position:absolute;top:-3px;left:-3px;right:-3px;bottom:-3px;background:#000;z-index:-1;transform:translate(6px,6px)}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:12px 24px;font-family:inherit;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s;border:none}
    .btn-primary{background:#000;color:#fff}.btn-primary:hover{background:#333}.btn-primary:disabled{background:#ccc;cursor:not-allowed}
    .btn-secondary{background:#fff;color:#000;border:2px solid #000}.btn-secondary:hover{background:#000;color:#fff}
    .btn-ghost{background:transparent;color:#666}.btn-ghost:hover{background:#f0f0f0;color:#000}
    .btn-sm{padding:8px 16px;font-size:12px}
    .tag{display:inline-flex;align-items:center;padding:4px 12px;font-size:12px;font-weight:500;background:#000;color:#fff}
    .tag-outline{background:#fff;color:#000;border:1px solid #000}
    .tag-gray{background:#e5e5e5;color:#666}
    .progress-bar{height:4px;background:#e5e5e5;border-radius:2px;overflow:hidden}
    .progress-bar-fill{height:100%;background:#000;transition:width .3s}
    .app-frame{background:#fff;min-height:100vh;display:flex;flex-direction:column}
    .app-header{display:flex;align-items:center;justify-content:space-between;padding:16px 24px;border-bottom:1px solid #e5e5e5}
    .app-logo{font-size:18px;font-weight:700;display:flex;align-items:center;gap:12px}
    .step-indicator{display:flex;align-items:center;gap:0}
    .step-item{display:flex;align-items:center}
    .step-dot{width:36px;height:36px;border-radius:50%;background:#e5e5e5;color:#999;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:600;transition:all .3s}
    .step-dot.active{background:#000;color:#fff}
    .step-dot.completed{background:#000;color:#fff}
    .step-line{width:60px;height:2px;background:#e5e5e5;transition:background .3s}
    .step-line.completed{background:#000}
    .step-label{font-size:11px;color:#999;margin-top:4px;text-align:center;position:absolute;top:100%;left:50%;transform:translateX(-50%);white-space:nowrap}
    .step-wrapper{position:relative}
    .step-wrapper.active .step-label,.step-wrapper.completed .step-label{color:#000}
    .main-content{flex:1;display:flex;align-items:center;justify-content:center;padding:48px}
    .content-card{width:100%;max-width:700px}
    .file-drop{border:3px dashed #ccc;padding:64px 48px;text-align:center;cursor:pointer;transition:all .2s;background:#fafafa}
    .file-drop:hover,.file-drop.dragover{border-color:#000;background:#f0f0f0}
    .file-drop.has-file{border-style:solid;border-color:#000;background:#fff}
    .checklist-item{display:flex;align-items:center;gap:16px;padding:16px;border-bottom:1px solid #e5e5e5;transition:background .2s}
    .checklist-item:last-child{border-bottom:none}
    .checklist-item:hover{background:#fafafa}
    .checkbox{width:24px;height:24px;border:2px solid #ccc;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s}
    .checkbox.checked{background:#000;border-color:#000;color:#fff}
    .strategy-option{padding:20px;border:2px solid #e5e5e5;cursor:pointer;transition:all .2s}
    .strategy-option:hover{border-color:#999}
    .strategy-option.selected{border-color:#000;background:#fafafa}
    .strategy-option.selected .icon-box{background:#000}
    .overlay-option{padding:16px;border:2px solid #e5e5e5;cursor:pointer;transition:all .2s;text-align:center}
    .overlay-option:hover{border-color:#999}
    .overlay-option.selected{border-color:#000;background:#fafafa}
    h2{font-size:28px;font-weight:300;margin-bottom:8px}
    h2 span{font-weight:600}
    h3{font-size:18px;font-weight:600;margin-bottom:8px}
    h4{font-size:14px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}
    .text-sm{font-size:14px}.text-xs{font-size:12px}.text-gray{color:#666}
    .flex{display:flex}.flex-col{flex-direction:column}.flex-1{flex:1}
    .gap-8{gap:8px}.gap-12{gap:12px}.gap-16{gap:16px}.gap-24{gap:24px}
    .items-center{align-items:center}.items-start{align-items:flex-start}
    .justify-between{justify-content:space-between}.justify-center{justify-content:center}
    .grid-2{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}
    .grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
    .mb-8{margin-bottom:8px}.mb-16{margin-bottom:16px}.mb-24{margin-bottom:24px}.mb-32{margin-bottom:32px}
    .text-center{text-align:center}
    .footer-nav{padding:24px;border-top:1px solid #e5e5e5;display:flex;justify-content:space-between;background:#fff}
    .slide{display:none}.slide.active{display:block}
    .fade-in{animation:fadeIn .3s ease}
    @keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
    .spinner{width:48px;height:48px;border:4px solid #e5e5e5;border-top-color:#000;border-radius:50%;animation:spin 1s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}
    .file-info{display:flex;align-items:center;gap:16px;padding:16px;background:#fafafa;border:1px solid #e5e5e5}
    .accent-line{height:2px;background:linear-gradient(90deg,#000 0%,transparent 100%);max-width:60px}
  </style>
</head>
<body>
<div class="app-frame">
  <div class="app-header">
    <div class="app-logo"><i class="fas fa-mask"></i> MaskAnyone</div>
    <div class="step-indicator">
      <div class="step-wrapper active" id="step-wrap-1">
        <div class="step-dot active" id="step-1">1</div>
        <span class="step-label">Upload</span>
      </div>
      <div class="step-line" id="line-1"></div>
      <div class="step-wrapper" id="step-wrap-2">
        <div class="step-dot" id="step-2">2</div>
        <span class="step-label">Review</span>
      </div>
      <div class="step-line" id="line-2"></div>
      <div class="step-wrapper" id="step-wrap-3">
        <div class="step-dot" id="step-3">3</div>
        <span class="step-label">Configure</span>
      </div>
      <div class="step-line" id="line-3"></div>
      <div class="step-wrapper" id="step-wrap-4">
        <div class="step-dot" id="step-4">4</div>
        <span class="step-label">Process</span>
      </div>
    </div>
    <button class="btn btn-ghost" onclick="resetFlow()"><i class="fas fa-times"></i> Cancel</button>
  </div>

  <div class="main-content">
    <div class="content-card">
      <!-- Step 1: Upload -->
      <div class="slide active" id="slide-1">
        <div class="text-center mb-32 fade-in">
          <h2>Upload Your <span>Video</span></h2>
          <p class="text-gray">Supported formats: MP4, AVI, MOV, MKV (max 2GB)</p>
        </div>
        <div class="file-drop fade-in" id="dropzone" onclick="document.getElementById('fileInput').click()">
          <div id="dropzone-content">
            <div class="icon-box icon-box-xl" style="margin:0 auto 24px"><i class="fas fa-cloud-upload-alt"></i></div>
            <h3 style="margin-bottom:8px">Drag and drop your video here</h3>
            <p class="text-sm text-gray mb-24">or click to browse files</p>
            <button class="btn btn-secondary" onclick="event.stopPropagation();document.getElementById('fileInput').click()">
              <i class="fas fa-folder-open"></i> Browse Files
            </button>
          </div>
          <div id="file-selected" style="display:none">
            <div class="icon-box icon-box-xl icon-box-success" style="margin:0 auto 24px"><i class="fas fa-check"></i></div>
            <h3 id="file-name" style="margin-bottom:8px">video.mp4</h3>
            <p class="text-sm text-gray mb-16" id="file-size">24.5 MB</p>
            <button class="btn btn-ghost btn-sm" onclick="event.stopPropagation();clearFile()">
              <i class="fas fa-times"></i> Remove
            </button>
          </div>
        </div>
        <input type="file" id="fileInput" accept="video/*" style="display:none" onchange="handleFile(this.files[0])">
        <div class="card" style="margin-top:24px">
          <div class="checklist-item">
            <div class="icon-box icon-box-sm icon-box-outline"><i class="fas fa-lightbulb"></i></div>
            <div class="flex-1">
              <p class="text-sm" style="font-weight:500">Good lighting recommended</p>
              <p class="text-xs text-gray">Improves face and body detection accuracy</p>
            </div>
          </div>
          <div class="checklist-item">
            <div class="icon-box icon-box-sm icon-box-outline"><i class="fas fa-video"></i></div>
            <div class="flex-1">
              <p class="text-sm" style="font-weight:500">720p minimum resolution</p>
              <p class="text-xs text-gray">Higher resolution enables better tracking</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Step 2: Review -->
      <div class="slide" id="slide-2">
        <div class="text-center mb-32 fade-in">
          <h2>Review <span>Detection</span></h2>
          <p class="text-gray">We've analyzed your video. Please confirm the detected subjects.</p>
        </div>
        <div class="card-elevated fade-in" style="padding:24px;margin-bottom:24px">
          <div class="flex gap-24">
            <div style="width:240px;height:135px;background:#222;display:flex;align-items:center;justify-content:center;flex-shrink:0">
              <i class="fas fa-film" style="font-size:32px;color:#666"></i>
            </div>
            <div class="flex-1">
              <h3 id="review-filename">interview_session.mp4</h3>
              <div class="accent-line" style="margin:12px 0"></div>
              <div class="grid-2" style="gap:12px">
                <div><p class="text-xs text-gray">Duration</p><p class="text-sm" style="font-weight:600">12:34</p></div>
                <div><p class="text-xs text-gray">Resolution</p><p class="text-sm" style="font-weight:600">1920 × 1080</p></div>
                <div><p class="text-xs text-gray">Frame Rate</p><p class="text-sm" style="font-weight:600">30 fps</p></div>
                <div><p class="text-xs text-gray">File Size</p><p class="text-sm" style="font-weight:600" id="review-size">24.5 MB</p></div>
              </div>
            </div>
          </div>
        </div>
        <div class="card fade-in">
          <div style="padding:16px;border-bottom:1px solid #e5e5e5;background:#fafafa">
            <div class="flex justify-between items-center">
              <h4 style="margin:0"><i class="fas fa-users" style="margin-right:8px"></i> DETECTED SUBJECTS</h4>
              <span class="tag">3 People</span>
            </div>
          </div>
          <div class="checklist-item" onclick="togglePerson(this)">
            <div class="checkbox checked"><i class="fas fa-check" style="font-size:12px"></i></div>
            <div class="icon-box icon-box-sm"><i class="fas fa-user"></i></div>
            <div class="flex-1">
              <p class="text-sm" style="font-weight:600">Person 1</p>
              <p class="text-xs text-gray">Visible throughout: 0:00 - 12:34</p>
            </div>
            <span class="tag-outline" style="font-size:10px">PRIMARY</span>
          </div>
          <div class="checklist-item" onclick="togglePerson(this)">
            <div class="checkbox checked"><i class="fas fa-check" style="font-size:12px"></i></div>
            <div class="icon-box icon-box-sm icon-box-gray"><i class="fas fa-user"></i></div>
            <div class="flex-1">
              <p class="text-sm" style="font-weight:600">Person 2</p>
              <p class="text-xs text-gray">Visible: 2:15 - 10:22</p>
            </div>
          </div>
          <div class="checklist-item" onclick="togglePerson(this)">
            <div class="checkbox checked"><i class="fas fa-check" style="font-size:12px"></i></div>
            <div class="icon-box icon-box-sm icon-box-gray"><i class="fas fa-user"></i></div>
            <div class="flex-1">
              <p class="text-sm" style="font-weight:600">Person 3</p>
              <p class="text-xs text-gray">Visible: 5:00 - 8:45</p>
            </div>
          </div>
        </div>
        <p class="text-xs text-gray" style="margin-top:16px;text-align:center">
          <i class="fas fa-info-circle"></i> Uncheck any person you don't want to anonymize
        </p>
      </div>

      <!-- Step 3: Configure -->
      <div class="slide" id="slide-3">
        <div class="text-center mb-32 fade-in">
          <h2>Configure <span>Anonymization</span></h2>
          <p class="text-gray">Choose how you want to mask the detected subjects</p>
        </div>
        <div class="fade-in">
          <h4 class="mb-16"><i class="fas fa-eye-slash" style="margin-right:8px"></i> HIDING STRATEGY</h4>
          <div class="grid-2 mb-32">
            <div class="strategy-option selected" onclick="selectStrategy(this, 'blur')">
              <div class="flex gap-16 items-center">
                <div class="icon-box"><i class="fas fa-tint"></i></div>
                <div>
                  <h3 style="margin-bottom:4px">Blurring</h3>
                  <p class="text-xs text-gray">Gaussian blur over detected regions</p>
                </div>
              </div>
            </div>
            <div class="strategy-option" onclick="selectStrategy(this, 'solid')">
              <div class="flex gap-16 items-center">
                <div class="icon-box icon-box-gray"><i class="fas fa-square-full"></i></div>
                <div>
                  <h3 style="margin-bottom:4px">Solid Fill</h3>
                  <p class="text-xs text-gray">Complete occlusion with color</p>
                </div>
              </div>
            </div>
            <div class="strategy-option" onclick="selectStrategy(this, 'pixel')">
              <div class="flex gap-16 items-center">
                <div class="icon-box icon-box-gray"><i class="fas fa-th"></i></div>
                <div>
                  <h3 style="margin-bottom:4px">Pixelation</h3>
                  <p class="text-xs text-gray">Mosaic effect for partial hiding</p>
                </div>
              </div>
            </div>
            <div class="strategy-option" onclick="selectStrategy(this, 'contour')">
              <div class="flex gap-16 items-center">
                <div class="icon-box icon-box-gray"><i class="fas fa-draw-polygon"></i></div>
                <div>
                  <h3 style="margin-bottom:4px">Contours</h3>
                  <p class="text-xs text-gray">Outline only, preserves movement</p>
                </div>
              </div>
            </div>
          </div>
          <h4 class="mb-16"><i class="fas fa-running" style="margin-right:8px"></i> OVERLAY (Optional)</h4>
          <div class="grid-3">
            <div class="overlay-option selected" onclick="selectOverlay(this, 'none')">
              <i class="fas fa-ban text-gray" style="font-size:24px;margin-bottom:8px;display:block"></i>
              <p class="text-sm" style="font-weight:600">None</p>
            </div>
            <div class="overlay-option" onclick="selectOverlay(this, 'mediapipe')">
              <i class="fas fa-male" style="font-size:24px;margin-bottom:8px;display:block"></i>
              <p class="text-sm" style="font-weight:600">MediaPipe</p>
              <p class="text-xs text-gray">33 points</p>
            </div>
            <div class="overlay-option" onclick="selectOverlay(this, 'openpose')">
              <i class="fas fa-street-view" style="font-size:24px;margin-bottom:8px;display:block"></i>
              <p class="text-sm" style="font-weight:600">OpenPose</p>
              <p class="text-xs text-gray">135 points</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Step 4: Processing -->
      <div class="slide" id="slide-4">
        <div class="text-center fade-in" id="processing-view">
          <div class="spinner" style="margin:0 auto 32px"></div>
          <h2>Processing <span>Video</span></h2>
          <p class="text-gray mb-32">This may take a few minutes depending on video length</p>
          <div class="card" style="max-width:400px;margin:0 auto;padding:24px">
            <div class="flex justify-between items-center mb-8">
              <span class="text-sm">Progress</span>
              <span class="text-sm" style="font-weight:600" id="progress-percent">0%</span>
            </div>
            <div class="progress-bar" style="height:8px">
              <div class="progress-bar-fill" id="progress-fill" style="width:0%"></div>
            </div>
            <p class="text-xs text-gray" style="margin-top:16px" id="progress-status">Analyzing video frames...</p>
          </div>
        </div>
        <div class="text-center fade-in" id="complete-view" style="display:none">
          <div class="icon-box icon-box-xl icon-box-success" style="margin:0 auto 24px"><i class="fas fa-check"></i></div>
          <h2 style="margin-bottom:8px">Processing <span>Complete!</span></h2>
          <p class="text-gray mb-32">Your anonymized video is ready for download</p>
          <div class="card-elevated" style="max-width:500px;margin:0 auto;padding:24px">
            <div class="flex gap-16 items-center mb-24">
              <div style="width:120px;height:68px;background:#222;display:flex;align-items:center;justify-content:center;flex-shrink:0">
                <i class="fas fa-mask" style="color:#666"></i>
              </div>
              <div class="flex-1 text-left">
                <h3 style="font-size:14px" id="output-filename">interview_session_masked.mp4</h3>
                <p class="text-xs text-gray">Blurring • No Overlay • 3 subjects masked</p>
              </div>
            </div>
            <div class="flex gap-12">
              <button class="btn btn-primary flex-1"><i class="fas fa-download"></i> Download</button>
              <button class="btn btn-secondary flex-1"><i class="fas fa-play"></i> Preview</button>
            </div>
          </div>
          <div class="flex gap-16 justify-center" style="margin-top:32px">
            <button class="btn btn-ghost" onclick="resetFlow()"><i class="fas fa-plus"></i> Process Another</button>
            <button class="btn btn-ghost"><i class="fas fa-save"></i> Save as Template</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="footer-nav" id="footer-nav">
    <button class="btn btn-ghost" id="backBtn" onclick="prevStep()" style="visibility:hidden">
      <i class="fas fa-arrow-left"></i> Back
    </button>
    <button class="btn btn-primary" id="nextBtn" onclick="nextStep()" disabled>
      Continue <i class="fas fa-arrow-right"></i>
    </button>
  </div>
</div>

<script>
let currentStep = 1;
let fileSelected = false;
let selectedStrategy = 'blur';
let selectedOverlay = 'none';
let fileName = '';
let fileSize = '';

const dropzone = document.getElementById('dropzone');

dropzone.addEventListener('dragover', (e) => {
  e.preventDefault();
  dropzone.classList.add('dragover');
});

dropzone.addEventListener('dragleave', () => {
  dropzone.classList.remove('dragover');
});

dropzone.addEventListener('drop', (e) => {
  e.preventDefault();
  dropzone.classList.remove('dragover');
  const file = e.dataTransfer.files[0];
  if (file && file.type.startsWith('video/')) {
    handleFile(file);
  }
});

function handleFile(file) {
  if (!file) return;
  fileName = file.name;
  fileSize = (file.size / (1024 * 1024)).toFixed(1) + ' MB';
  document.getElementById('file-name').textContent = fileName;
  document.getElementById('file-size').textContent = fileSize;
  document.getElementById('dropzone-content').style.display = 'none';
  document.getElementById('file-selected').style.display = 'block';
  dropzone.classList.add('has-file');
  fileSelected = true;
  updateNav();
}

function clearFile() {
  document.getElementById('dropzone-content').style.display = 'block';
  document.getElementById('file-selected').style.display = 'none';
  dropzone.classList.remove('has-file');
  document.getElementById('fileInput').value = '';
  fileSelected = false;
  updateNav();
}

function togglePerson(el) {
  const checkbox = el.querySelector('.checkbox');
  checkbox.classList.toggle('checked');
  const icon = checkbox.querySelector('i');
  if (checkbox.classList.contains('checked')) {
    icon.style.display = 'block';
  } else {
    icon.style.display = 'none';
  }
}

function selectStrategy(el, strategy) {
  document.querySelectorAll('.strategy-option').forEach(opt => {
    opt.classList.remove('selected');
    opt.querySelector('.icon-box').classList.add('icon-box-gray');
    opt.querySelector('.icon-box').classList.remove('icon-box');
  });
  el.classList.add('selected');
  el.querySelector('.icon-box-gray').classList.remove('icon-box-gray');
  el.querySelector('div[class*="icon-box"]').classList.add('icon-box');
  selectedStrategy = strategy;
}

function selectOverlay(el, overlay) {
  document.querySelectorAll('.overlay-option').forEach(opt => opt.classList.remove('selected'));
  el.classList.add('selected');
  selectedOverlay = overlay;
}

function updateStepIndicator() {
  for (let i = 1; i <= 4; i++) {
    const dot = document.getElementById(`step-${i}`);
    const wrap = document.getElementById(`step-wrap-${i}`);
    const line = document.getElementById(`line-${i}`);
    
    dot.classList.remove('active', 'completed');
    wrap.classList.remove('active', 'completed');
    if (line) line.classList.remove('completed');
    
    if (i < currentStep) {
      dot.classList.add('completed');
      dot.innerHTML = '<i class="fas fa-check" style="font-size:14px"></i>';
      wrap.classList.add('completed');
      if (line) line.classList.add('completed');
    } else if (i === currentStep) {
      dot.classList.add('active');
      dot.textContent = i;
      wrap.classList.add('active');
    } else {
      dot.textContent = i;
    }
  }
}

function updateNav() {
  const backBtn = document.getElementById('backBtn');
  const nextBtn = document.getElementById('nextBtn');
  const footerNav = document.getElementById('footer-nav');
  
  backBtn.style.visibility = currentStep > 1 ? 'visible' : 'hidden';
  
  if (currentStep === 1) {
    nextBtn.disabled = !fileSelected;
    nextBtn.innerHTML = 'Continue <i class="fas fa-arrow-right"></i>';
  } else if (currentStep === 2) {
    nextBtn.disabled = false;
    nextBtn.innerHTML = 'Continue <i class="fas fa-arrow-right"></i>';
  } else if (currentStep === 3) {
    nextBtn.disabled = false;
    nextBtn.innerHTML = '<i class="fas fa-play"></i> Start Processing';
  } else if (currentStep === 4) {
    footerNav.style.display = 'none';
  }
}

function showSlide(n) {
  document.querySelectorAll('.slide').forEach(s => s.classList.remove('active'));
  document.getElementById(`slide-${n}`).classList.add('active');
}

function nextStep() {
  if (currentStep === 3) {
    // Start processing
    currentStep = 4;
    showSlide(4);
    updateStepIndicator();
    updateNav();
    startProcessing();
    return;
  }
  
  if (currentStep < 4) {
    currentStep++;
    showSlide(currentStep);
    updateStepIndicator();
    updateNav();
    
    if (currentStep === 2) {
      document.getElementById('review-filename').textContent = fileName;
      document.getElementById('review-size').textContent = fileSize;
    }
  }
}

function prevStep() {
  if (currentStep > 1) {
    currentStep--;
    showSlide(currentStep);
    updateStepIndicator();
    updateNav();
  }
}

function startProcessing() {
  let progress = 0;
  const statuses = [
    'Analyzing video frames...',
    'Detecting subjects...',
    'Applying mask regions...',
    'Rendering output...',
    'Finalizing...'
  ];
  
  const interval = setInterval(() => {
    progress += Math.random() * 15;
    if (progress > 100) progress = 100;
    
    document.getElementById('progress-percent').textContent = Math.round(progress) + '%';
    document.getElementById('progress-fill').style.width = progress + '%';
    document.getElementById('progress-status').textContent = statuses[Math.floor(progress / 25)] || statuses[statuses.length - 1];
    
    if (progress >= 100) {
      clearInterval(interval);
      setTimeout(() => {
        document.getElementById('processing-view').style.display = 'none';
        document.getElementById('complete-view').style.display = 'block';
        document.getElementById('output-filename').textContent = fileName.replace('.mp4', '_masked.mp4');
      }, 500);
    }
  }, 300);
}

function resetFlow() {
  currentStep = 1;
  fileSelected = false;
  clearFile();
  showSlide(1);
  updateStepIndicator();
  updateNav();
  document.getElementById('footer-nav').style.display = 'flex';
  document.getElementById('processing-view').style.display = 'block';
  document.getElementById('complete-view').style.display = 'none';
  document.getElementById('progress-percent').textContent = '0%';
  document.getElementById('progress-fill').style.width = '0%';
}

updateNav();
</script>
</body>
</html>
